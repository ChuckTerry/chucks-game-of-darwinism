<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Chuck's Game of Darwinism</title>
        <link type="text/css" rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <header>
            <h1>Chuck's Game of Darwinism</h1>
            <div class="controls">
                <div class="group">
                    <button type="button" title="[Space]" id="play-button" class="primary">â–¶ Play</button>
                    <button type="button" title="[N]" id="step-button">ðŸ¡’â€¢ Step</button>
                    <button type="button" title="[C]" id="clear-button">âŽš Clear</button>
                    <button type="button" title="[R]" id="rand-button">ðŸ”€ Randomize</button>
                </div>
                <div class="group">
                    <label>Speed <input id="speed" type="range" min="1" max="60" value="30" /></label>
                    <span id="fps" class="mono">30 fps</span>
                </div>
                <div class="group">
                    <label>Grid</label>
                    <input id="cols" type="number" min="10" max="1024" value="400" title="cols" />w&nbsp;&nbsp;
                    Ã—
                    <input id="rows" type="number" min="10" max="1024" value="180" title="rows" />h
                    <label><input id="cellPx" type="number" min="1" max="20" value="3" /> Px/Cell</label>
                    <button id="resizeBtn">â¤¢ Resize</button>
                </div>
            </div>
        </header>
        <main>
            <aside>
                <div class="grid-wrap">
                    <div class="canvas-container">
                        <canvas id="primary-view" width="840" height="540"></canvas>
                        <canvas id="history-overlay" width="840" height="540"></canvas>
                    </div>
                    <div class="row">
                        <div class="group">
                            <label>History Opacity<div><input id="overlay-opacity" type="number" min="0" max="100" value="0" title="Overlay Opacity" /><span class="input-units">%</span></div>
                            </label>
                            <button type="button" id="clear-history-button">Clear History</button>
                        </div>
                        <div class="group">
                            <div class="legend">
                                <div><input type="color" id="color-empty" value="#000000" title="Change Empty color"> Empty </div>
                                <div><input type="color" id="color-species-a" value="#e74c3c" title="Change Species A color"> Species A </div>
                                <div><input type="color" id="color-species-b" value="#3498db" title="Change Species B color"> Species B </div>
                                <div><input type="color" id="color-diseased" value="#2ecc71" title="Change Diseased color"> Diseased </div>
                                <div><input type="color" id="color-contested" value="#f1c40f" title="Change Contested color"> Contested </div>
                            </div>
                        </div>
                        <div class="group">
                            <label>Brush</label>
                            <select id="brush" title="Brush">
                                <option value="0">Empty</option>
                                <option value="1">Species A</option>
                                <option value="2">Species B</option>
                                <option value="3">Disease</option>
                                <option value="4">Contested</option>
                            </select>
                        <div class="hint">Click: Paint<br />Shift-click: Erase<br />Right-click: Cycle</div></div>
                    </div>
                    <details class="simulation-parameters" open>
                        <summary><strong>Rules & Parameters (live)</strong></summary>
                        <div class="params">
                            <div class="slider"><label><input id="BIRTH" type="range" min="1" max="5" value="3"><span class="mono" id="BIRTHv">3</span>BIRTH (â‰¥)</label></div>
                            <div class="slider"><label><input id="Smin" type="range" min="1" max="4" value="2"><span class="mono" id="Sminv">2</span>SURVIVE min</label></div>
                            <div class="slider"><label><input id="Smax" type="range" min="1" max="5" value="3"><span class="mono" id="Smaxv">3</span>SURVIVE max</label></div>
                            <div class="slider"><label><input id="OVER" type="range" min="3" max="8" value="4"><span class="mono" id="OVERv">4</span>OVER (â‰¥)</label></div>
                            <div class="slider"><label><input id="Cmin" type="range" min="1" max="6" value="3"><span class="mono" id="Cminv">3</span>CONTEST_MIN (â‰¥)</label></div>
                            <div class="slider"><label><input id="MARG" type="range" min="0" max="3" value="1"><span class="mono" id="MARGv">1</span>MARGIN (â‰¥)</label></div>
                            <div class="slider"><label><input id="Istrict" type="range" min="1" max="4" value="2"><span class="mono" id="Istrictv">2</span>INFECT_STRICT (â‰¥G)</label></div>
                            <div class="slider"><label><input id="Iweak" type="range" min="0" max="2" value="1"><span class="mono" id="Iweakv">1</span>INFECT_WEAK (â‰¥G if weak)</label></div>
                            <div class="slider"><label><input id="TAU" type="range" min="1" max="6" value="2"><span class="mono" id="TAUv">2</span>G lifetime TAU</label></div>
                            <div class="slider"><label><input id="Ydec" type="range" min="1" max="6" value="2"><span class="mono" id="Ydecv">2</span>Y max age</label></div>
                            <div class="slider"><label><input id="dens" type="range" min="0" max="100" value="18"><span class="mono" id="densv">18%</span>Random fill %</label></div>
                            <div class="slider"><label><input id="gdens" type="range" min="0" max="20" value="2"><span class="mono" id="gdensv">2%</span>G chance in random</label></div>
                        </div>
                    </details>

                    <div class="hint">
                        Priority: <em>Disease trigger â†’ G aging/decay â†’ Empty births â†’ A/B survival/contest â†’ Y resolution</em>.
                        Toroidal edges (wrap). Moore neighborhood (8). Contested neighbors count half for both.
                    </div>

            </aside>
        </main>

        <script src="javascript/script.js" type="module"></script>
    </body>

</html>
